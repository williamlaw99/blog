---
layout: post
title: Java垃圾回收机制
category: Java基础
tags: Essay
keywords: 
---



#### 问题一：Java里的垃圾是指什么？

> Java里的垃圾是指Java堆里面不可达的对象，他们需要被清理以让出内存空间。比如以下几种情况：
>
> (1)改变对象的引用，如置为null或者指向其他对象。
> (2)超出作用域 
> (3)类嵌套导致未完全释放 
> (4)线程中的垃圾 


#### 问题二：Java的垃圾回收机制是怎样的？

> Java垃圾回收机制概括来说就是对Java堆里面不可达的对象进行不定时回收以让出内存空间的机制。

​	Java的垃圾回收机制是通过GC来实现的，GC即垃圾收集器Garbage Collectio，GC本质上是一个后台守护进程，但它是低优先级的，而且优先级可以动态分配，只有当他优先级低到一定程度它才会自动运行，从而实现对内存的回收，也因此垃圾回收的时间不确定。GC中调用回收的方法--收集器garbage collector，它只能回收new方法产生的对象，但堆里面也有native方法产生的对象，这一部分不是用GC而是本地方法如free.



#### 问题三：GC不定时这一点为何要这样设计？

因为GC也是进程，也要消耗CPU等资源，如果GC执行过于频繁会对java的程序的执行产生较大的影响（java解释器本来就不快），因此JVM的设计者们选着了不定期的gc。



#### 问题四：GC是如何实现的？

由于GC要消耗一些资源和时间，为减少对应用造成的暂停，Java内存回收机制采用“分代”的方式进行对象的收集。Java堆的组成有不同的区域和分代，JVM对新生代和旧生代采用不同的垃圾回收机制。
Java的做法很聪明，我们称之为"自适应"的垃圾回收器，或者是"自适应的、分代的、停止-复制、标记-清扫"式垃圾回收器。它会根据不同的环境和需要选择不同的处理方式。



#### 问题五：GC对不同引用类型的回收情况？
JVM中将对象的引用分为了四种类型，不同的对象引用类型会造成GC采用不同的方法进行回收：

（1）强引用：默认情况下，对象采用的均为强引用（GC不会回收）
（2）软引用：软引用是Java中提供的一种比较适合于缓存场景的应用（只有在内存不够用的情况下才会被GC）
（3）弱引用：在GC时一定会被GC回收
（4）虚引用：在GC时一定会被GC回收

（5）无引用：不可达的对象，即垃圾，在GC时优先回收。